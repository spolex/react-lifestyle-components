{"version":3,"file":"main.3236233d00a89eaa24f9.hot-update.js","sources":["webpack:///./src/components/D3Barchart/D3Barchart.js","webpack:///./src/hooks/index.js","webpack:///./src/hooks/useD3.js"],"sourcesContent":["import * as d3 from 'd3';\nimport React from 'react';\nimport { useD3 } from '../../hooks';\n\nfunction makeAxis(scale) {\n  var n = 5,\n    data = scale.domain(),\n    dataLength = data.length;\n\n  return d3\n    .axisBottom(scale)\n    .tickValues(dataLength > n ? d3.ticks(data[0], data[dataLength - 1], n) : data);\n}\n\nexport const BarChartD3 = ({ data }) => {\n  const ref = useD3(\n    svg => {\n      const height = 500;\n      const width = 500;\n      const margin = { top: 20, right: 30, bottom: 30, left: 40 };\n\n      const x = d3\n        .scaleBand()\n        .domain(data.map(d => d.attr))\n        .rangeRound([margin.left, width - margin.right])\n        .padding(0.1);\n\n      const y1 = d3\n        .scaleLinear()\n        .domain([0, d3.max(data, d => d.metric)])\n        .rangeRound([height - margin.bottom, margin.top]);\n\n      const xAxis = g =>\n        g.attr('transform', `translate(0,${height - margin.bottom})`).call(\n          d3\n            .axisBottom(x)\n            .tickValues(\n              d3.ticks(...d3.extent(x.domain()), width / 40).filter(v => x(v) !== undefined),\n            )\n            .tickSizeOuter(0)\n            .call(makeAxis(xL))\n        );\n\n      const y1Axis = g =>\n        g\n          .attr('transform', `translate(${margin.left},0)`)\n          .style('color', 'steelblue')\n          .call(d3.axisLeft(y1).ticks(null, 's'))\n          .call(g => g.select('.domain').remove())\n          .call(g =>\n            g\n              .append('text')\n              .attr('x', -margin.left)\n              .attr('y', 10)\n              .attr('fill', 'currentColor')\n              .attr('text-anchor', 'start')\n              .text(data.y1),\n          );\n\n      svg.select('.x-axis').call(xAxis);\n      svg.select('.y-axis').call(y1Axis);\n\n      svg\n        .select('.plot-area')\n        .attr('fill', 'steelblue')\n        .selectAll('.bar')\n        .data(data)\n        .join('rect')\n        .attr('class', 'bar')\n        .attr('x', d => x(d.attr))\n        .attr('width', x.bandwidth())\n        .attr('y', d => y1(d.metric))\n        .attr('height', d => y1(0) - y1(d.metric));\n    },\n    [data.length],\n  );\n\n  return (\n    <svg\n      ref={ref}\n      style={{\n        height: 500,\n        width: '100%',\n        marginRight: '2px',\n        marginLeft: '3px',\n      }}\n    >\n      <g className=\"plot-area\" />\n      <g className=\"x-axis\" />\n      <g className=\"y-axis\" />\n    </svg>\n  );\n};\n","export * from './useD3';\n","import React from 'react';\nimport * as d3 from 'd3';\n\nexport const useD3 = (renderChartFn, dependencies) => {\n  const ref = React.useRef();\n\n  React.useEffect(() => {\n    renderChartFn(d3.select(ref.current));\n    return () => {};\n  }, dependencies);\n  return ref;\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAEA;AAGA;AAEA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AAAA;AAIA;AAEA;AAAA;AAGA;AAAA;AAKA;AAAA;AAIA;AAEA;AAAA;AAKA;AAAA;AACA;AAOA;AACA;AAEA;AACA;AAEA;AAOA;AAAA;AAEA;AAAA;AACA;AAAA;AACA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAGA;AA9EA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACdA;AAAA;AAAA;;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}