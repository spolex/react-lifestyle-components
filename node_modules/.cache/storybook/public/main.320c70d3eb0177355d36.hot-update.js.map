{"version":3,"file":"main.320c70d3eb0177355d36.hot-update.js","sources":["webpack:///./src/components/Meal/Meal.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Button, Col, Container, Row, Table } from 'reactstrap';\nimport { Food } from '../Food/Food';\n\nexport const Meal = ({ title, editable, foods, units }) => {\n  const [_foods, setFoods] = useState(foods);\n  const [totalCarb, setTotalCarb] = useState(0);\n  const [totalCals, setTotalCals] = useState(0);\n  const [totalProt, setTotalProt] = useState(0);\n  const [totalFat, setTotalFat] = useState(0);\n  const [_units, setUnits] = useState(units);\n  const [isEditable, setIsEditable] = useState(editable);\n\n  useEffect(() => {\n    setIsEditable(editable);\n    agg();\n  }, [editable, _foods]);\n\n  const agg = () => {\n    setTotalCals(\n      _foods\n        .map(food => 4 * (food.prot + food.carb) + 9 * food.fat)\n        .reduce((cur, acc) => cur + acc),\n    );\n    setTotalProt(_foods.map(food => food.prot).reduce((cur, acc) => cur + acc));\n    setTotalCarb(_foods.map(food => food.carb).reduce((cur, acc) => cur + acc));\n    setTotalCarb(_foods.map(food => food.fat).reduce((cur, acc) => cur + acc));\n  };\n\n  const handleOnSave = () => {\n    setIsEditable(false);\n    agg();\n  };\n\n  const handleOnAdd = () => {\n    setFoods([\n      ..._foods,\n      { id: _foods.length, units: _units, portion: 0, prot: 0, carb: 0, fat: 0 },\n    ]);\n  };\n\n  const handleOnDelete = () => {\n    setFoods(_foods.filter(food => food.id !== _foods.length));\n  };\n\n  const handleItemOnChange = item => {\n    setFoods(\n      _foods.map(food => {\n        if (food.id === item.id) {\n          return item;\n        }\n        return food;\n      }),\n    );\n  };\n\n  return (\n    <Container>\n      <Row>\n        <h2>{title}</h2>\n      </Row>\n      <Row>\n        <Table>\n          <thead>\n            <tr>\n              <th>#</th>\n              <th>name</th>\n              <th>group</th>\n              <th>portion</th>\n              <th>calories</th>\n              <th>proteins</th>\n              <th>carbohydrates</th>\n              <th>fat</th>\n            </tr>\n          </thead>\n          <tbody>\n            {_foods.map(item => (\n              <Food\n                key={item.id}\n                item={item}\n                editable={isEditable}\n                handleItemOnChange={handleItemOnChange}\n              ></Food>\n            ))}\n          </tbody>\n        </Table>\n      </Row>\n      <Row>\n        <Col>Total Calories: {totalCals}</Col>\n        <Col>Total Proteins: {totalProt}</Col>\n        <Col>Total Carbs: {totalCarb}</Col>\n        <Col>Total Fats: {totalFat}</Col>\n      </Row>\n      <Row>\n        <Col xs={8}>\n          <Button color=\"success\" onClick={handleOnSave}>\n            Save\n          </Button>\n        </Col>\n        <Col xs={4}>\n          <Button color=\"danger\" onClick={handleOnDelete}>\n            -\n          </Button>\n          <Button color=\"primary\" onClick={handleOnAdd}>\n            +\n          </Button>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;;;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AADA;AAGA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AARA;AADA;AAYA;AACA;AAGA;AACA;AACA;AAJA;AADA;AADA;AAbA;AADA;AA0BA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAJA;AAMA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AADA;AAKA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAJA;AANA;AApCA;AAqDA;AA1GA;;;;;;;;;;;;;;;;;A","sourceRoot":""}